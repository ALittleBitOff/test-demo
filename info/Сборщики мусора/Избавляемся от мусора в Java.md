[[Инструменты мониторинга]]
### Что такое сборка мусора, зачем она нужна и как работает

Для работы любого приложения требуется память. Однако память компьютера ограничена. Поэтому важно ее очищать от старых неиспользуемых данных, чтобы освободить место для новых.

Кто занимается этой очисткой? Как и когда очищается память? Как выглядит структура памяти? Давайте разберем с этим подробнее.

### Структура памяти Java

Память в Java состоит из следующих областей:

![Структура памяти Java](https://habrastorage.org/r/w1560/getpro/habr/upload_files/0fd/29a/713/0fd29a71366c3832002a9c8a9ca6266a.png "Структура памяти Java")

Структура памяти Java

**Native Memory** — вся доступная системная память.

**Heap (куча)** — часть native memory, выделенная для кучи. Здесь JVM хранит объекты. Это общее пространство для всех потоков приложения. Размер этой области памяти настраивается с помощью параметра -Xms (минимальный размер) и -Xmx (максимальный размер).

**Stack (стек)** — используется для хранения локальных переменных и стека вызовов метода. Для каждого потока выделяется свой стек.

**Metaspace (метаданные)** — в этой памяти хранятся метаданные классов и статические переменные. Это пространство также является общими для всех. Так как metaspace является частью native memory, то его размер зависит от платформы. Верхний предел объема памяти, используемой для metaspace, можно настроить с помощью флага MaxMetaspaceSize.

**PermGen** (Permanent Generation, постоянное поколение) присутствовало до Java 7. Начиная с Java 8 ему на смену пришла область Metaspace.

**CodeCache (кэш кода)** — JIT-компилятор компилирует часто исполняемый код, преобразует его в нативный машинный код и кеширует для более быстрого выполнения. Это тоже часть native memory.